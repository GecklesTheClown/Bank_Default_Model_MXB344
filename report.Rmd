---
title: "Report"
author: "TBD"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("./scripts/setup.r")
source(here("scripts","functions.r"))

all_loan_data <- read.csv(file = here::here('datasets', 'all_loan_data.csv')) # Load in the loan data
training_loan_data <- read.csv(file = here::here('datasets', 'training_loan_data.csv')) # Load in the loan data
validation_loan_data <- read.csv(file = here::here('datasets', 'validation_loan_data.csv')) # Load in the loan data

app_cov <- c("loan_amnt","term","int_rate","emp_length","home_ownership","annual_inc","verification_status","purpose","repay_fail")
all_loan_data <- all_loan_data[,app_cov]
all_cat_var <- c("repay_fail",
                 "term",
                 "emp_length",
                 "home_ownership", 
                 "verification_status", 
                 "purpose")

all_loan_data[,all_cat_var] <- lapply(all_loan_data[all_cat_var], factor)
lapply(all_loan_data[all_cat_var],levels) # Make all categorical variables into factors for R 
```

And, load in the extended data.

```{r}
extended_loan_data <- read.csv(file = here::here('datasets', 'extended_loan_data.csv')) # Load in the loan data

extended_loan_data[,all_cat_var] <- lapply(extended_loan_data[all_cat_var], factor)
lapply(extended_loan_data[all_cat_var],levels) # Make all categorical variables into factors for R 

ext_loan_data <- extended_loan_data
```
Violin plots for normal data for the 4 categorical variables vs the 3 continuous variables 

Violin Plots for term
```{r exploreall data set term vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in all_loan_data

# Kernal/Violin plot of term vs loan_amnt
tmp <- melt(all_loan_data[, c("term", "loan_amnt")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of term vs int_rate
tmp <- melt(all_loan_data[, c("term", "int_rate")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of term vs annual_inc
tmp <- melt(all_loan_data[, c("term", "annual_inc")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for verification_status
```{r exploreall data set verification_status vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in all_loan_data

# Kernal/Violin plot of verification_status vs loan_amnt
tmp <- melt(all_loan_data[, c("verification_status", "loan_amnt")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of verification_status vs int_rate
tmp <- melt(all_loan_data[, c("verification_status", "int_rate")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of verification_status vs annual_inc
tmp <- melt(all_loan_data[, c("verification_status", "annual_inc")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for purpose
```{r exploreall data set purpose vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in all_loan_data

# Kernal/Violin plot of purpose vs loan_amnt
tmp <- melt(all_loan_data[, c("purpose", "loan_amnt")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of purpose vs int_rate
tmp <- melt(all_loan_data[, c("purpose", "int_rate")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of purpose vs annual_inc
tmp <- melt(all_loan_data[, c("purpose", "annual_inc")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for home_ownership
```{r exploreall data set home_ownership vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in all_loan_data

# Kernal/Violin plot of home_ownership vs loan_amnt
tmp <- melt(all_loan_data[, c("home_ownership", "loan_amnt")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of home_ownership vs int_rate
tmp <- melt(all_loan_data[, c("home_ownership", "int_rate")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of home_ownership vs annual_inc
tmp <- melt(all_loan_data[, c("home_ownership", "annual_inc")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```


Violin plots for extended data for the 4 categorical variables vs the 3 continuous variables 

Violin Plots for term
```{r exploreext data set term vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in ext_loan_data

# Kernal/Violin plot of term vs loan_amnt
tmp <- melt(ext_loan_data[, c("term", "loan_amnt")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of term vs int_rate
tmp <- melt(ext_loan_data[, c("term", "int_rate")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of term vs annual_inc
tmp <- melt(ext_loan_data[, c("term", "annual_inc")], id.vars="term")
ggplot(tmp, aes(x = term, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for verification_status
```{r exploreext data set verification_status vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in ext_loan_data

# Kernal/Violin plot of verification_status vs loan_amnt
tmp <- melt(ext_loan_data[, c("verification_status", "loan_amnt")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of verification_status vs int_rate
tmp <- melt(ext_loan_data[, c("verification_status", "int_rate")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of verification_status vs annual_inc
tmp <- melt(ext_loan_data[, c("verification_status", "annual_inc")], id.vars="verification_status")
ggplot(tmp, aes(x = verification_status, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for purpose
```{r exploreext data set purpose vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in ext_loan_data

# Kernal/Violin plot of purpose vs loan_amnt
tmp <- melt(ext_loan_data[, c("purpose", "loan_amnt")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of purpose vs int_rate
tmp <- melt(ext_loan_data[, c("purpose", "int_rate")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of purpose vs annual_inc
tmp <- melt(ext_loan_data[, c("purpose", "annual_inc")], id.vars="purpose")
ggplot(tmp, aes(x = purpose, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```

Violin Plots for home_ownership
```{r exploreext data set home_ownership vs 3 continous variables, include=TRUE}
## Kernal/Violin plots of emp_lenth vs 3 continous variables in ext_loan_data

# Kernal/Violin plot of home_ownership vs loan_amnt
tmp <- melt(ext_loan_data[, c("home_ownership", "loan_amnt")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of home_ownership vs int_rate
tmp <- melt(ext_loan_data[, c("home_ownership", "int_rate")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()

# Kernal/Violin plot of home_ownership vs annual_inc
tmp <- melt(ext_loan_data[, c("home_ownership", "annual_inc")], id.vars="home_ownership")
ggplot(tmp, aes(x = home_ownership, y = value)) +
  geom_jitter(alpha = .1) +
  geom_violin(alpha = .75) +
  facet_grid(variable ~ .) #+
#scale_y_sqrt()
```